# Global Scenarios Only Example

## What This Demonstrates

This example shows the `--global-scenarios-only` flag which runs only collection-wide tests from `test/_global/`, skipping all per-feature tests.

## Key Behavior

With `--global-scenarios-only`:
- ✓ Global scenarios from `test/_global/` execute
- ✗ Per-feature autogenerated tests are skipped
- ✗ Per-feature scenarios are skipped
- ✗ Duplicate/idempotence tests are skipped (they're per-feature)
- Cannot be combined with `--features` (mutually exclusive)

## Use Cases

- **Collection validation**: Verify the test infrastructure works
- **Environment checks**: Test base images and system requirements
- **Pre-flight tests**: Quick checks before running full feature tests
- **CI health checks**: Validate test environment setup

## Commands

```sh
# Run only global scenarios
deacon features test . --global-scenarios-only

# With JSON output
deacon features test . --global-scenarios-only --json
```

## Expected Output

```text
Running features test suite...

Global Scenarios:
  ✓ _global: environment-check
  ✓ _global: connectivity-test

Summary: 2 tests, 2 passed, 0 failed
```

## Collection Structure

```
global-scenarios-only/
├── src/
│   └── example-feature/
└── test/
    ├── example-feature/     # Skipped with --global-scenarios-only
    └── _global/             # Only these run
        ├── scenarios.jsonc
        ├── test_environment.sh
        └── test_connectivity.sh
```

## Related Examples

- `basic-test-suite/` - See when global scenarios run automatically
- `feature-selection/` - How `--features` excludes globals
